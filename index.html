<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mohammed S. Al-Mahrouqi | Engineer</title>
    <meta name="description" content="Senior Machine Learning Engineer @ NVIDIA. Aerospace Engineer @ Georgia Tech.">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>
    <!-- 3D Globe Library -->
    <script src="https://unpkg.com/globe.gl"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        background: '#030303', // Deep Void
                        surface: '#080808',
                        primary: '#FFFFFF',
                        secondary: '#94A3B8',
                        accent: '#38BDF8',     // Ion Blue
                    },
                    boxShadow: {
                        'neon': '0 0 20px -5px rgba(56, 189, 248, 0.3), 0 0 10px -5px rgba(56, 189, 248, 0.2)',
                        'glass-dark': '0 20px 40px -4px rgba(0, 0, 0, 0.6), inset 0 0 0 1px rgba(255, 255, 255, 0.05)',
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            opacity: 0.035;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        html {
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
        }

        body {
            background-color: #030303;
            color: #FFFFFF;
            overflow-x: hidden;
            cursor: none;
        }

        section {
            scroll-snap-align: start;
            scroll-snap-stop: always;
        }

        /* Magnetic Cursor */
        .cursor-dot {
            width: 6px;
            height: 6px;
            background-color: #38BDF8;
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            z-index: 10000;
            pointer-events: none;
            box-shadow: 0 0 15px #38BDF8;
        }

        .cursor-outline {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(56, 189, 248, 0.3);
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            z-index: 10000;
            pointer-events: none;
            transition: width 0.3s, height 0.3s, background-color 0.3s, border-color 0.3s;
        }

        body:hover .cursor-outline.hovered {
            width: 80px;
            height: 80px;
            background-color: rgba(56, 189, 248, 0.03);
            border-color: #38BDF8;
            box-shadow: 0 0 30px rgba(56, 189, 248, 0.1);
        }

        /* Ultimate Dark Card */
        .ultimate-card {
            background: rgba(10, 10, 10, 0.7);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 2rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.9), inset 0 0 0 1px rgba(255, 255, 255, 0.03);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            transform-style: preserve-3d;
            transform: perspective(1000px);
            overflow: hidden;
        }

        .ultimate-card:hover {
            transform: translateY(-8px) scale(1.005);
            border-color: rgba(56, 189, 248, 0.3);
            box-shadow: 0 40px 80px -20px rgba(56, 189, 248, 0.15), inset 0 0 0 1px rgba(56, 189, 248, 0.2);
            background: rgba(15, 15, 15, 0.8);
        }

        /* 
           BREATHING WAVE TRANSITION 
           Independent of mouse, slow elegant wave of color
        */
        .cinema-wrapper {
            position: relative;
            overflow: hidden;
            border-radius: inherit;
        }

        .cinema-image-bw {
            filter: grayscale(100%) contrast(120%) brightness(0.9);
            position: absolute;
            inset: 0;
            z-index: 1;
        }

        .cinema-image-color {
            filter: grayscale(0%) contrast(105%) brightness(1.1);
            position: absolute;
            inset: 0;
            z-index: 2;
            pointer-events: none;
            /* Let clicks pass through */

            /* The Mask Effect */
            -webkit-mask-image: linear-gradient(115deg, transparent 25%, black 45%, black 55%, transparent 75%);
            mask-image: linear-gradient(115deg, transparent 25%, black 45%, black 55%, transparent 75%);
            -webkit-mask-size: 400% 100%;
            mask-size: 400% 100%;
            -webkit-mask-position: 100% 0;
            mask-position: 100% 0;

            /* Breathing Animation */
            animation: color-breathe 10s ease-in-out infinite;
        }

        @keyframes color-breathe {
            0% {
                -webkit-mask-position: 100% 0;
                mask-position: 100% 0;
            }

            50% {
                -webkit-mask-position: 0% 0;
                mask-position: 0% 0;
            }

            100% {
                -webkit-mask-position: 100% 0;
                mask-position: 100% 0;
            }
        }

        /* Subtle Scale on Hover (Retained for feel, but color is independent) */
        .ultimate-card:hover .cinema-image-color,
        .ultimate-card:hover .cinema-image-bw {
            transform: scale(1.05);
            transition: transform 1.5s cubic-bezier(0.25, 1, 0.5, 1);
        }

        /* Canvas Background */
        #canvas-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
    </style>
</head>

<body class="antialiased selection:bg-accent/30 selection:text-white">

    <div class="noise-overlay"></div>
    <div class="cursor-dot hidden md:block"></div>
    <div class="cursor-outline hidden md:block"></div>

    <canvas id="canvas-bg"></canvas>

    <!-- Floating Nav -->
    <div class="fixed top-6 left-0 right-0 z-50 flex justify-center px-6 pointer-events-none">
        <nav
            class="ultimate-card !rounded-full !bg-black/80 px-2 py-2 flex items-center gap-1 pointer-events-auto shadow-2xl shadow-black/50">
            <a href="#home"
                class="interactive-link px-6 py-3 rounded-full text-xs font-bold text-gray-400 hover:text-white hover:bg-white/10 transition-all duration-300 tracking-wide">HOME</a>
            <a href="#work"
                class="interactive-link px-6 py-3 rounded-full text-xs font-bold text-gray-400 hover:text-white hover:bg-white/10 transition-all duration-300 tracking-wide">WORK</a>
            <a href="#about"
                class="interactive-link px-6 py-3 rounded-full text-xs font-bold text-gray-400 hover:text-white hover:bg-white/10 transition-all duration-300 tracking-wide">INTEL</a>
            <div class="w-px h-5 bg-white/10 mx-1"></div>
            <a href="#travel"
                class="interactive-link px-6 py-3 rounded-full text-xs font-bold text-gray-400 hover:text-white hover:bg-white/10 transition-all duration-300 tracking-wide">OPS</a>
            <div class="w-px h-5 bg-white/10 mx-1"></div>
            <a href="https://github.com/Malmahrouqi3" target="_blank"
                class="interactive-link p-3 rounded-full text-gray-400 hover:text-white hover:bg-white/10 transition-all duration-300"><i
                    data-lucide="github" class="w-4 h-4"></i></a>
        </nav>
    </div>

    <!-- Hero -->
    <section id="home" class="min-h-screen flex flex-col justify-center px-6 md:px-12 lg:px-24">
        <div class="max-w-8xl mx-auto w-full grid md:grid-cols-2 gap-16 items-center">

            <div class="order-2 md:order-1 relative z-10">
                <div data-aos="fade-up"
                    class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 shadow-lg mb-8 backdrop-blur-md">
                    <span class="relative flex h-2 w-2">
                        <span
                            class="animate-ping absolute inline-flex h-full w-full rounded-full bg-accent opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-accent"></span>
                    </span>
                    <span class="text-[10px] font-bold tracking-widest text-accent uppercase">System Online //
                        v4.2</span>
                </div>

                <h1 data-aos="fade-up" data-aos-delay="100"
                    class="text-7xl md:text-9xl font-extrabold tracking-tight leading-[0.9] text-white mb-8">
                    Orbit<br>
                    <span
                        class="text-transparent bg-clip-text bg-gradient-to-r from-white via-gray-400 to-white animate-pulse-slow">Aware.</span>
                </h1>

                <p data-aos="fade-up" data-aos-delay="200"
                    class="text-xl md:text-2xl text-secondary font-medium max-w-xl leading-relaxed mb-10">
                    Architecting the convergence of <span class="text-white font-bold">Hypersonic Propulsion</span> and
                    <span class="text-white font-bold">Edge AI</span>.
                </p>

                <div data-aos="fade-up" data-aos-delay="300" class="flex gap-4">
                    <a href="#work"
                        class="interactive-link group relative px-8 py-4 bg-white text-black rounded-full font-bold text-sm tracking-wide shadow-[0_0_25px_rgba(255,255,255,0.2)] hover:shadow-[0_0_40px_rgba(255,255,255,0.4)] hover:scale-105 transition-all duration-300">
                        <span class="flex items-center gap-2">Mission Logs <i data-lucide="arrow-down-right"
                                class="w-4 h-4"></i></span>
                    </a>
                </div>
            </div>

            <div class="order-1 md:order-2 flex justify-center md:justify-end relative" data-tilt data-tilt-max="4"
                data-tilt-speed="1000" data-tilt-perspective="1200">
                <div
                    class="absolute top-10 -right-10 w-80 h-80 bg-accent/20 rounded-full blur-[100px] animate-pulse-slow">
                </div>

                <div
                    class="ultimate-card p-4 relative w-[320px] md:w-[380px] text-center group bg-black/40 animate-float">
                    <div class="relative overflow-hidden rounded-[1.5rem] mb-6 aspect-[4/5] cinema-wrapper">
                        <!-- Dual Image Layer for Breathing Effect -->
                        <img src="images/mo2.jpg" class="cinema-image-color w-full h-full object-cover"
                            alt="Profile Color">
                        <img src="images/mo2.jpg" class="cinema-image-bw w-full h-full object-cover" alt="Profile BW">

                        <div class="absolute bottom-4 left-4 z-20 text-left pointer-events-none">
                            <div
                                class="inline-block px-2 py-1 bg-black/50 backdrop-blur rounded-md border border-white/10 text-[10px] font-bold text-accent mb-1 tracking-wider uppercase">
                                Active</div>
                        </div>
                    </div>

                    <h2 class="text-2xl font-bold text-white mb-1">M. Al-Mahrouqi</h2>
                    <p class="text-xs font-bold text-gray-500 tracking-widest uppercase mb-4">Engineer // Pilot</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Work Section -->
    <section id="work"
        class="h-screen w-full flex flex-col justify-center px-6 md:px-12 lg:px-16 pt-24 pb-12 overflow-hidden bg-background">
        <div class="flex items-end justify-between mb-6 shrink-0">
            <div>
                <h2 class="text-4xl font-bold text-white mb-1 tracking-tight">Directives</h2>
                <div class="h-1 w-16 bg-accent rounded-full shadow-[0_0_15px_#38BDF8]"></div>
                <!-- Subtitle for context -->
                <p class="text-secondary text-xs mt-2 uppercase tracking-widest font-bold">Classified Projects //
                    Clearance Level 4</p>
            </div>

        </div>

        <!-- DASHBOARD CONTAINER: Fits in remaining height -->
        <div class="grid grid-cols-1 md:grid-cols-12 gap-6 h-full w-full">

            <!-- LEFT COLUMN: HERO (Span 7) -->
            <div data-aos="fade-right" class="md:col-span-8 lg:col-span-7 h-full">
                <div class="interactive-link ultimate-card h-full w-full relative overflow-hidden group p-0">
                    <!-- Background Image -->
                    <div class="cinema-wrapper absolute inset-0">
                        <img src="images/LEOJet Performance.png" class="cinema-image-color w-full h-full object-cover"
                            alt="LEOJet Color">
                        <img src="images/LEOJet Performance.png" class="cinema-image-bw w-full h-full object-cover"
                            alt="LEOJet BW">
                    </div>

                    <!-- Gradient Overlay -->
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent z-10"></div>

                    <!-- Content -->
                    <div class="absolute inset-0 z-20 p-8 md:p-10 flex flex-col justify-end">
                        <div class="mb-4">
                            <span
                                class="inline-block px-3 py-1 bg-accent/20 border border-accent/30 rounded-full text-[10px] font-bold text-accent shadow-neon mb-3 backdrop-blur-md">
                                FLAGSHIP PROJECT
                            </span>
                            <h3
                                class="text-4xl md:text-5xl font-extrabold text-white leading-tight mb-2 drop-shadow-2xl">
                                LEOJet<br />Propulsion
                            </h3>
                            <p
                                class="text-gray-300 text-sm md:text-base max-w-md line-clamp-2 mb-6 border-l-2 border-accent pl-4">
                                Hypersonic ramjet architecture optimizing specific impulse at Mach 6+.
                            </p>
                        </div>

                        <!-- Stats Grid inside Hero -->
                        <div class="grid grid-cols-2 gap-4 w-full max-w-md">
                            <div
                                class="bg-white/5 backdrop-blur-lg border border-white/10 p-4 rounded-xl group-hover:bg-white/10 transition-colors">
                                <div class="text-[10px] text-gray-400 uppercase tracking-wider font-bold mb-1">Thrust
                                    Output</div>
                                <div class="text-2xl font-mono font-bold text-white">4.76 Mlb</div>
                            </div>
                            <div
                                class="bg-white/5 backdrop-blur-lg border border-white/10 p-4 rounded-xl group-hover:bg-white/10 transition-colors">
                                <div class="text-[10px] text-gray-400 uppercase tracking-wider font-bold mb-1">Sim
                                    Engine</div>
                                <div class="text-2xl font-mono font-bold text-white">MATLAB</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RIGHT COLUMN: 2x2 GRID (Span 5) -->
            <div class="md:col-span-4 lg:col-span-5 grid grid-cols-2 grid-rows-2 gap-4 h-full">

                <!-- CARD 1: RCS -->
                <div data-aos="fade-up" data-aos-delay="100"
                    class="col-span-1 row-span-1 interactive-link ultimate-card p-5 group flex flex-col relative overflow-hidden bg-surface/50">
                    <div
                        class="absolute top-4 right-4 text-emerald-500 opacity-50 group-hover:opacity-100 transition-opacity">
                        <i data-lucide="crosshair" class="w-5 h-5"></i>
                    </div>
                    <h4 class="text-lg font-bold text-white mb-1 mt-auto z-10">RCS Control</h4>
                    <p class="text-[10px] text-gray-400 font-medium uppercase tracking-wider z-10">PID Logic // Air
                        Bearings</p>
                    <!-- Subtle visual bg -->
                    <img src="images/RCS Assembly.png"
                        class="absolute right-[-20%] bottom-[-20%] w-[80%] opacity-20 group-hover:opacity-40 transition-opacity duration-500"
                        alt="RCS">
                </div>

                <!-- CARD 2: Aeroelastic -->
                <div data-aos="fade-up" data-aos-delay="150"
                    class="col-span-1 row-span-1 interactive-link ultimate-card p-5 group flex flex-col relative overflow-hidden bg-surface/50">
                    <div
                        class="absolute top-4 right-4 text-indigo-400 opacity-50 group-hover:opacity-100 transition-opacity">
                        <i data-lucide="wind" class="w-5 h-5"></i>
                    </div>
                    <h4 class="text-lg font-bold text-white mb-1 mt-auto z-10">Aero Flex</h4>
                    <p class="text-[10px] text-gray-400 font-medium uppercase tracking-wider z-10">FEA Strain // NACA
                        2412</p>
                    <img src="images/Wing Flexing FEA.png"
                        class="absolute right-[-20%] bottom-[-20%] w-[90%] opacity-20 group-hover:opacity-40 transition-opacity duration-500 grayscale"
                        alt="FEA">
                </div>

                <!-- CARD 3: Flow Code -->
                <div data-aos="fade-up" data-aos-delay="200"
                    class="col-span-1 row-span-1 interactive-link ultimate-card p-5 group flex flex-col relative overflow-hidden bg-surface/50">
                    <div
                        class="absolute top-4 right-4 text-violet-400 opacity-50 group-hover:opacity-100 transition-opacity">
                        <i data-lucide="terminal" class="w-5 h-5"></i>
                    </div>
                    <h4 class="text-lg font-bold text-white mb-1 mt-auto z-10">Flow Code</h4>
                    <p class="text-[10px] text-gray-400 font-medium uppercase tracking-wider z-10">Fortran // Docker</p>
                    <div
                        class="absolute right-2 bottom-2 font-mono text-[9px] text-white/10 leading-tight pointer-events-none">
                        DO I=1,N<br>CALL SOLVE(X)<br>END DO
                    </div>
                </div>

                <!-- CARD 4: Re-Entry -->
                <div data-aos="fade-up" data-aos-delay="250"
                    class="col-span-1 row-span-1 interactive-link ultimate-card p-0 group flex flex-col items-center justify-center relative overflow-hidden bg-gradient-to-br from-rose-900/10 to-transparent">
                    <div
                        class="w-12 h-12 rounded-full bg-rose-500/10 border border-rose-500/20 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-[0_0_20px_rgba(244,63,94,0.2)]">
                        <i data-lucide="flame" class="w-6 h-6 text-rose-500"></i>
                    </div>
                    <h4 class="text-base font-bold text-white">Re-Entry</h4>
                    <span
                        class="px-2 py-0.5 mt-2 bg-rose-500/20 border border-rose-500/30 rounded text-[9px] font-bold text-rose-400">HYPERSONIC</span>
                </div>

            </div>
        </div>
    </section>

    <section id="travel" class="min-h-screen flex flex-col justify-center py-24 relative overflow-hidden">
        <div class="w-full h-screen absolute inset-0 z-10 flex items-center justify-center">
            <div id="globe-container" class="w-full h-full cursor-move">
                <!-- Globe rendered here -->
            </div>
        </div>
        <div class="relative z-20 pointer-events-none text-center mt-[-30vh]">
            <h2 class="text-5xl font-bold text-white mb-2 drop-shadow-xl" data-aos="fade-up">Operational Coverage</h2>
        </div>
        <!-- Backlight for the globe -->
        <div
            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-accent/5 rounded-full blur-[120px] pointer-events-none">
        </div>
    </section>

    <!-- Experience -->
    <section id="about" class="min-h-screen flex flex-col justify-center py-24 px-6 md:px-12 lg:px-24">
        <div class="max-w-4xl mx-auto">
            <div class="relative pl-8 border-l border-white/10 space-y-16">
                <!-- Timeline items kept same as previous... -->
                <div data-aos="fade-left" class="group relative">
                    <div
                        class="absolute -left-[39px] top-1 w-5 h-5 bg-black border-4 border-accent rounded-full z-10 shadow-neon">
                    </div>
                    <div class="flex flex-col md:flex-row md:items-baseline justify-between mb-2">
                        <h3 class="text-2xl font-bold text-white">Senior ML Engineer</h3>
                        <span
                            class="text-xs font-bold text-black bg-accent px-3 py-1 rounded-full shadow-neon">PRESENT</span>
                    </div>
                    <div class="text-sm font-bold text-accent mb-4 tracking-wide shadow-black">NVIDIA CORPORATION</div>
                    <p class="text-secondary leading-relaxed max-w-2xl">Perception pipelines & Silicon validation.</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-12 text-center bg-black border-t border-white/5">
        <h4 class="text-white font-black text-xl mb-2">MOHAMMED S. AL-MAHROUQI</h4>
        <p class="text-xs text-gray-600 font-bold tracking-widest uppercase mb-8">System Status: Optimal</p>
    </footer>

    <script>
        lucide.createIcons();
        AOS.init({ duration: 800, offset: 40, once: true, easing: 'ease-out-cubic' });
        lucide.createIcons();
        AOS.init({ duration: 800, offset: 40, once: true, easing: 'ease-out-cubic' });

        // REMOVED LENIS for instant native scroll + CSS Snap

        // Cursor
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorOutline = document.querySelector('.cursor-outline');
        window.addEventListener('mousemove', function (e) {
            const posX = e.clientX;
            const posY = e.clientY;
            cursorDot.style.left = `${posX}px`;
            cursorDot.style.top = `${posY}px`;
            cursorOutline.animate({ left: `${posX}px`, top: `${posY}px` }, { duration: 400, fill: "forwards" });
        });

        // --- MAJESTIC PARTICLES (OPTIMIZED) ---
        const canvas = document.getElementById('canvas-bg');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];
        let stars = [];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            initParticles();
        }
        window.addEventListener('resize', resize);
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;

        class Star {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.size = Math.random() * 1.2 + 0.3; // Increased size slightly
                this.opacity = Math.random() * 0.7 + 0.3; // Brighter
            }
            draw() {
                ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        class Particle {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.vx = (Math.random() - 0.5) * 0.6; // Faster
                this.vy = (Math.random() - 0.5) * 0.6;
                this.size = Math.random() * 2.5 + 1.0; // Larger and more majestic
                this.color = Math.random() > 0.6 ? 'rgba(56, 189, 248, ' : 'rgba(255, 255, 255, ';
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                if (this.x < 0) this.x = width;
                if (this.x > width) this.x = 0;
                if (this.y < 0) this.y = height;
                if (this.y > height) this.y = 0;
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color + '0.9)'; // High opacity for visibility
                ctx.shadowBlur = 10; // Majestic Glow
                ctx.shadowColor = this.color + '1)';
                ctx.fill();
                ctx.shadowBlur = 0; // Reset
            }
        }

        function initParticles() {
            particles = [];
            stars = [];
            // Reduced count for better performance/response
            for (let i = 0; i < 100; i++) stars.push(new Star());
            for (let i = 0; i < 50; i++) particles.push(new Particle());
        }

        function animateParticles() {
            ctx.clearRect(0, 0, width, height);
            stars.forEach(star => star.draw());
            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();
                for (let j = i; j < particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    if (distance < 160) {
                        ctx.beginPath();
                        let opacity = 0.25 * (1 - distance / 160); // More visible lines
                        ctx.strokeStyle = `rgba(255, 255, 255, ${opacity})`;
                        ctx.lineWidth = 0.8;
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animateParticles);
        }
        initParticles();
        animateParticles();

        // --- 3D GLOBE INITIALIZATION ---
        // Places lived/visited - APPROXIMATE COORDS
        const visitedPlaces = [
            { name: "Georgia Tech (ATL)", lat: 33.7490, lng: -84.3880, color: '#38BDF8' },
            { name: "NVIDIA (Santa Clara)", lat: 37.3541, lng: -121.9552, color: '#10B981' },
            { name: "Oman (Home)", lat: 21.4735, lng: 55.9754, color: '#F59E0B' },
            { name: "Korea (Samsung)", lat: 37.5665, lng: 126.9780, color: '#ec4899' }
        ];

        // Fixed: Use Globe() factory, do not use 'new', and do not shadow the 'Globe' library variable
        // Fetch GeoJSON for countries
        fetch('https://raw.githubusercontent.com/vasturiano/globe.gl/master/example/datasets/ne_110m_admin_0_countries.geojson')
            .then(res => res.json())
            .then(countries => {
                const myGlobe = Globe()(document.getElementById('globe-container'))
                    .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-dark.jpg') // Dark holographic look
                    .bumpImageUrl('https://unpkg.com/three-globe/example/img/earth-topology.png')
                    // .backgroundImageUrl(...) REMOVED: Clashes with site theme
                    .width(window.innerWidth)
                    .height(window.innerHeight)
                    .backgroundColor('rgba(0,0,0,0)') // Transparent bg to blend

                    // POLYGONS (Countries)
                    .polygonsData(countries.features.filter(d => d.properties.ISO_A2 !== 'AQ')) // Exclude Antarctica for aesthetics
                    .polygonCapColor(d => {
                        // Highlight Visited Countries: US, Oman (OM), South Korea (KR)
                        const visited = ['US', 'OM', 'KR'];
                        if (visited.includes(d.properties.ISO_A2)) {
                            return 'rgba(56, 189, 248, 0.6)'; // Accent Color (Ion Blue) with opacity
                        }
                        return 'rgba(255, 255, 255, 0.05)'; // Subtle glass for others
                    })
                    .polygonSideColor(() => 'rgba(255, 255, 255, 0.02)')
                    .polygonStrokeColor(() => '#111')
                    .polygonAltitude(0.01)

                    // LABELS (Points)
                    .pointsData(visitedPlaces)
                    .pointAltitude(0.1)
                    .pointColor('color')
                    .pointRadius(0.8)
                    .pointsMerge(true)
                    .pointResolution(2)

                    .atmosphereColor('#38BDF8')
                    .atmosphereAltitude(0.15)
                    .onGlobeReady(() => {
                        myGlobe.pointOfView({ lat: 20, lng: 0, altitude: 2.5 });
                        // Controls Configuration
                        const controls = myGlobe.controls();
                        controls.autoRotate = true;
                        controls.autoRotateSpeed = 0.5;
                        controls.enableZoom = false; // Disable Zoom as requested
                        controls.enablePan = false;  // Keep centered
                    });

                // Handle Resize for Globe
                window.addEventListener('resize', () => {
                    myGlobe.width(document.getElementById('globe-container').clientWidth);
                });
            });


        // Handle Resize for Globe
        window.addEventListener('resize', () => {
            // Ensure globe always fills window
            if (myGlobe) {
                myGlobe.width(window.innerWidth);
                myGlobe.height(window.innerHeight);
            }
        });
    </script>
</body>

</html>